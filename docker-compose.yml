version: '3'
services:
  master_1:
    image: redis:3
    ports:
      - "6379:6379"
    network_mode: "host"
    environment:
      TZ: Asia/Shanghai
  slave_1:
    image: redis:3
    ports:
      - "6380:6379"
    network_mode: "host"
    environment:
      TZ: Asia/Shanghai
    command: redis-server --slaveof 172.31.20.15 6379
  slave_2:
    image: redis:3
    ports:
      - "6381:6379"
    network_mode: "host"
    environment:
      TZ: Asia/Shanghai
    command: redis-server --slaveof 172.31.20.15 6379
  sentinel:
    build: sentinel
    ports:
      - "26379"
    network_mode: "host"
    environment:
      SENTINEL_DOWN_AFTER: 5000
      SENTINEL_FAILOVER: 5000
      HOST_IP: 172.31.20.15
      TZ: Asia/Shanghai

