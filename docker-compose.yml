version: '3'
services:
  master:
    image: redis:3
    ports:
      - "6379"
    environment:
      TZ: Asia/Shanghai
  slave:
    image: redis:3
    ports:
      - "6379"
    environment:
      TZ: Asia/Shanghai
    command: redis-server --slaveof redis-master 6379
    links:
      - master:redis-master
  sentinel:
    build: sentinel
    ports:
      - "26379"
      - "6379"
    environment:
      SENTINEL_DOWN_AFTER: 5000
      SENTINEL_FAILOVER: 5000
      TZ: Asia/Shanghai
    links:
      - master:redis-master
      - slave
